<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>BAS Join</title>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

  <!-- JQuery library -->
  <script type="text/javascript" src="/javascript_files/jquery-1.11.3.js"></script>

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

  <!-- JQuery form actions -->
  <script type="text/javascript" src="/javascript_files/jquery.validate.js"></script>
  <script type="text/javascript" language="javascript">
    $(document).ready(function() {
        $("#submit").hide();
        $("#language_work").hide();
        $("#demographics").hide();
        $("#events").hide();
        $("#children_support").hide();

        var welcome_form = $("#welcome");
        var click_counter = 0;

        $("#next").click(function () {
          welcome_form.validate({
            rules: {
              full_name: "required",
              spoogler_email: {
                required: true,
                email: true
              },
              spoogler_fb_email: "email",
              googler_ldap: "required",
            },
            messages:{
              full_name: "Please enter the Spoogler's full name",
              spoogler_email: {
                required: "Please enter the Spoogler's email",
                email: "Please enter a valid email"
              },
              googler_ldap: "Please enter the Googler's ldap"
            },
          });

          if(welcome_form.valid()) {
            click_counter++;
          }
          if(click_counter == 1) {
            $("#language_work").show("slow");
          }
          else if(click_counter == 2) {
            $("#demographics").show("slow");
          }
          else if(click_counter == 3) {
            $("#events").show("slow");
          }
          else if(click_counter >= 4) {
            $("#children_support").show("slow");
            $("#submit").show();
            $("#next").hide();
          }
        });
    });
  </script>

  <!-- Text color for the errors detected through the JQuery validation plugin -->
  <style>
  .error {
      color:red;
  }
  </style>

</head>
<body {% if successful_submission %}onload="showAlert()"{% endif %}>
  <div class="container">  
    <h1>Request to join the Bay Area Spooglers Group</h1>
    
    <p>This form is for partners/spouses of Googlers who have recently 
    relocated to the Bay Area.</p>
    <p>Please fill in the information below if you are interested in joining 
    the Bay Area Spooglers Group to connect with other Spooglers. You will be 
    added to the group once your information is verified.</p>
    <p>Many of the group's activities are planned based on your response to 
    this form.</p>
    
    <p><b>* Required</b></p>
    
    {% if not valid_form %}
        <p style="color:red"><b>There are errors in the form.</b></p>
        {% if spoogler_email_duplicate %}
            <p style="color:red">Spoogler email address already exists.</p>
        {% endif %}
        {% if googler_ldap_error and not googler_ldap_duplicate %}
            <p style="color:red">Please write the Googler's ldap without the "@google.com".</p>
        {% endif %}
        {% if googler_ldap_error and googler_ldap_duplicate %}
            <p style="color:red">Googler's ldap already exists. If you are trying with the correct Googler's ldap and still receive this message, contact us: bayareaspooglers.webmaster@gmail.com</p>
        {% endif %}
    {% endif %}
    
    
  <form role="form" class="form-horizontal" action="" method="post" id="welcome">
    <!-- BASIC INFORMATION -->
    <div id="basic_info">
      <!-- Spoogler's Full Name -->
      <div class="form-group {% if first_name_error %} has-error {% endif %}">
        <label class="control-label col-sm-5" for="full_name">*Spoogler's Full Name: </label>
        <div class="col-sm-4">
          <input type="text" class="form-control" id="full_name" name="full_name" value="{{ full_name }}" />
        </div>
      </div>
      <!-- Spoogler's email -->      
      <div class="form-group {% if spoogler_email_error %} has-error {% endif %}">
        <label class="control-label col-sm-5" for="spoogler_email">*Spoogler's email: </label>
        <div class="col-sm-4">
          <input type="text" class="form-control" id="spoogler_email" name="spoogler_email" value="{{ spoogler_email }}" />
        </div>
      </div>
      <!-- Spoogler's Facebook email -->
      <div class="form-group {% if spoogler_email_error %} has-error {% endif %}">
        <label class="control-label col-sm-5" for="spoogler_fb_email">If you (the Spoogler) have a Facebook account, what is the email you use for that account? </label>
        <div class="col-sm-4">
          <input type="text" class="form-control" id="spoogler_fb_email" name="spoogler_fb_email" value="{{ spoogler_fb_email }}" />
        </div>
      </div>
      <!-- Googler's ldap -->
      <div class="form-group {% if googler_ldap_error %} has-error {% endif %}">
       <label class="control-label col-sm-5" for="googler_ldap">*Googler's ldap: </label>
       <div class="col-sm-4">
         <input type="text" class="form-control" id="googler_ldap" name="googler_ldap" value="{{ googler_ldap }}" />
       </div>
       <div class="col-sm-3">
         <p class="form-control-static">@google.com</p>
       </div>
      </div>
    </div>
    <!-- LANGUAGE AND WORK STATUS -->
    <div id="language_work">
      <!-- From what country did you relocate? -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="spoogler_country">From what country did you relocate?</label>
        <div class="col-sm-4">
          <input type="text" class="form-control" id="spoogler_country" name="spoogler_country" value="{{ spoogler_country }}" />
        </div>
      </div>
      <!-- Spoogler's current work status: -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="work_status">Spoogler's current work status:</label>
        <div class="col-sm-4">
          {% for status in spoogler_work_status %}
            <div class="radio">
              <label><input type="radio" id="work_status" name="work_status" value="{{ loop.index0 }}" {% if loop.index0 == 0 %} checked {% endif %}> {{ status }}</label>
            </div>
          {% endfor %}
        </div>
      </div>
      <!-- Spoogler's English language proficiency -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="engl_proficiency">Spoogler's English language proficiency: </label>
        <div class="col-sm-4">
          {% for proficiency in  engl_proficiency %}
            <div class="radio">
              <label><input type="radio" id="engl_proficiency" name="engl_proficiency" value="{{ loop.index0 }}" {% if loop.index0 == 0 %} checked {% endif %}> {{ proficiency }}</label>
            </div>
          {% endfor %}
        </div>
      </div>
      <!-- Other languages spoken by Spoogler -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="spoogler_lang2">What (if any) other languages do you (the Spoogler) speak and what is your proficiency?</label>
        <div class="col-sm-4">
          <input type="text" class="form-control" id="spoogler_lang2" name="spoogler_lang2" value="{{ spoogler_lang2 }}" />
        </div>
      </div>
      <!-- Spoogler's native language -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="spoogler_lang">Spoogler's native language:</label>
        <div class="col-sm-4">
          <input type="text" class="form-control" id="spoogler_lang" name="spoogler_lang" value="{{ spoogler_lang }}" />
        </div>
      </div>
    </div>
    <!-- DEMOGRAPHICS -->
    <div id="demographics">
      <!-- Where do you live in the Bay Area? -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="address">Where do you live in the Bay Area?</label>
        <div class="col-sm-4">
          {% for option in address %}
          <div class="radio">
            <label><input type="radio" id="address" name="address" value="{{ loop.index0 }}" {% if loop.index0 == 0 %} checked {% endif %}> {{ option }}
              {% if loop.last %}
                <input type="text" class="form-control" id="other_address" name="other_address" value="{{ other_address }}"/>
              {% endif %}
            </label>
          </div>
          {% endfor %}
        </div>
      </div>
      <!-- How long have you been in the Bay Area? -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="time_in_area">How long have you been in the Bay Area?</label>
        <div class="col-sm-4">
          {% for t in time %}
            <div class="radio">
            <label><input type="radio" id="time_in_area" name="time" value="{{ loop.index0 }}" {% if loop.index0 == 0 %} checked {% endif %}> {{ t }}</label>
            </div>
          {% endfor %}
        </div>
      </div>
      <!-- What have you found challenging about your relocation to the Bay Area? -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="spoogler_relo">What have you found challenging about your relocation to the Bay Area?</label>
        <div class="col-sm-4">
          <input type="text" class="form-control" id="spoogler_relo" name="spoogler_relo" value="{{ spoogler_relo }}" />
        </div>
      </div>
      <!-- Spoogler's main form of transportation -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="transportation">Spoogler's main form of transportation to get around in the Bay Area: </label>
        <div class="col-sm-4">
          {% for transport in transportation %}
          <div class="radio">
            <label><input type="radio" id="transportation" name="transportation" value="{{ loop.index0 }}" {% if loop.index0 == 0%} checked {% endif %}> {{ transport }}</label>
          </div>
          {% endfor %}
        </div>
      </div>
      <!-- Side of the road Spoogler is accostumed to driving -->      
      <div class="form-group">
        <label class="control-label col-sm-5" for="side_driving">On what side of the road are you (the Spoogler) accustomed to driving?: </label>
        <div class="col-sm-4">
          {% for side in side_driving %}
          <div class="radio">
            <label><input type="radio" id="side_driving" name="side_driving" value="{{ loop.index0 }}" {% if loop.index0 == 0 %} checked {% endif %}> {{ side }}</label>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    <!-- EVENTS -->
    <div id="events">
      <!-- What size of events would you be interested in attending? -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="event_size">What size of events would you be interested in attending? Select all that apply.</label>
        <div class="col-sm-4">
          {% for size in event_size %}
            <div class="checkbox">
              <label><input type="checkbox" id="event_size" name="event_size" value="{{ loop.index0 }}"> {{ size }}</label>
            </div>
          {% endfor %}
        </div>
      </div>
      <!-- What type of events would you be interested in attending? -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="event_type">What type of events would you be interested in attending? Select all that apply.</label>
        <div class="col-sm-4">
          {% for type in event_type %}
            <div class="checkbox">
              <label><input type="checkbox" id="event_type" name="event_type" value="{{ loop.index0 }}"> {{ type }}
                {% if loop.last %}
                  <input type = "text" class="form-control" id="event_type_other" name="event_type_other" value="{{ event_type_other }}"/>
                {% endif %}
              </label>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
    <!-- CHILDREN AND SUPPORT SERVICES -->
    <div id="children_support">
      <!-- What type of support services would you find useful from this group? -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="support_type">What type of support services would you find useful from this group? Select all that apply.</label>
        <div class="col-sm-4">
          {% for support in support_type %}
           <div class="checkbox">
              <label><input type="checkbox" id="support_type" name="support_type" value="{{ loop.index0 }}"> {{ support }}
                {% if loop.last %}
                  <input type = "text" class="form-control" id="support_type_other" name="support_type_other" value="{{ support_type_other }}"/>
                {% endif %}
              </label>
           </div>
          {% endfor %}
        </div>
      </div>
      <!-- What other forms of support do you have or will you access? -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="support_other">What other forms of support do you have or will you access? Select all that apply.</label>
        <div class="col-sm-4">
          {% for other in support_other %}
        <div class="checkbox">
            <label><input type="checkbox" id="support_other" name="support_other" value="{{ loop.index0 }}"> {{ other }}
              {% if loop.last %}
                <input type = "text" class="form-control" id="other" name="other" value="{{ support_type_other2 }}"/>
              {% endif %}
            </label>
         </div>
          {% endfor %}
        </div>
      </div>
      <!-- If you have any children, please select their age group: -->
      <div class="form-group">
        <label class="control-label col-sm-5" for="children_ages">If you have any children, please select their age group:</label>
        <div class="col-sm-4">
          {% for age in children_ages %}
          <div class="checkbox">
          <label><input type="checkbox" id="children_ages" name="children_ages" value="{{ loop.index0 }}"> {{ age }}</label>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
      <div class="col-md-12 text-center">
        <input class="btn btn-lg btn-success" id="next" type="button" value="Next"/>
        <button type="submit" class="btn btn-lg btn-primary" id="submit">Submit</button>
      </div>
  </form>
  </div>
  
  <script>
    function showAlert() {
        alert("Thank you for filling out the membership form. A confirmation email has been sent to the @google.com email of the Googler.");  
    }
  </script>
  
</body>
</html>
