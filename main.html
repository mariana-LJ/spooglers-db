<!DOCTYPE html>
<html  lang="en">
<head lang="en">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>BAS Join</title>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

  <!-- JQuery library -->
  <script type="text/javascript" src="/javascript_files/jquery-1.11.3.js"></script>

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

  <!-- JQuery form actions -->
  <script type="text/javascript" src="/javascript_files/jquery.validate.js"></script>
  <script type="text/javascript" language="javascript">
    $(document).ready(function() {
        //$("#submit").hide();
        //$("#language_work").hide();
        //$("#demographics").hide();
        //$("#events").hide();
        //$("#children_support").hide();

        var welcome_form = $("#welcome");
        var click_counter = 0;

        $("#next").click(function () {
          welcome_form.validate({
            rules: {
              full_name: "required",
              spoogler_email: {
                required: true,
                email: true
              },
              spoogler_fb_email: "email",
              googler_ldap: "required",
            },
            messages:{
              full_name: "Please enter the Spoogler's full name",
              spoogler_email: {
                required: "Please enter the Spoogler's email",
                email: "Please enter a valid email"
              },
              googler_ldap: "Please enter the Googler's ldap"
            },
          });

          if(welcome_form.valid()) {
            click_counter++;
          }
          if(click_counter == 1) {
            $("#language_work").show("slow");
          }
          else if(click_counter == 2) {
            $("#demographics").show("slow");
          }
          else if(click_counter == 3) {
            $("#events").show("slow");
          }
          else if(click_counter >= 4) {
            $("#children_support").show("slow");
            $("#submit").show();
            $("#next").hide();
          }
        });
    });
  </script>

  <!-- Text color for the errors detected through the JQuery validation plugin -->
  <style>
  .error {
      color:red;
  }
  </style>

</head>
<body {% if successful_submission %}onload="showAlert()"{% endif %}>
  <div class="container">  
    <h1>Request to join the Bay Area Spooglers Group</h1>
    
    <p>This form is for partners/spouses of Googlers who have recently 
    relocated to the Bay Area.</p>
    <p>Please fill in the information below if you are interested in joining 
    the Bay Area Spooglers Group to connect with other Spooglers. You will be 
    added to the group once your information is verified.</p>
    <p>Many of the group's activities are planned based on your response to 
    this form.</p>
    
    <p><b>* Required</b></p>
    
    {% if not valid_form %}
        <p style="color:red"><b>There are errors in the form.</b></p>
        {% if spoogler_email_duplicate %}
            <p style="color:red">Spoogler email address already exists.</p>
        {% endif %}
        {% if googler_ldap_error and not googler_ldap_duplicate %}
            <p style="color:red">Please write the Googler's ldap without the "@google.com".</p>
        {% endif %}
        {% if googler_ldap_error and googler_ldap_duplicate %}
            <p style="color:red">Googler's ldap already exists. If you are trying with the correct Googler's ldap and still receive this message, contact us: bayareaspooglers.webmaster@gmail.com</p>
        {% endif %}
    {% endif %}
    

  <form action="" method="post" id="welcome">
    <!-- BASIC INFORMATION -->
    <div id="basic_info">
      <!-- Spoogler's Full Name -->
      <div class="form-group {% if first_name_error %} has-error {% endif %}">
        <label class="control-label" for="full_name">*Spoogler's Full Name: </label>
          <input type="text" class="form-control" id="full_name" name="full_name" value="{{ full_name }}" />
      </div>
      <!-- Spoogler's email -->      
      <div class="form-group {% if spoogler_email_error %} has-error {% endif %}">
        <label class="control-label" for="spoogler_email">*Spoogler's email: </label>
        <input type="text" class="form-control" id="spoogler_email" name="spoogler_email" value="{{ spoogler_email }}" />
      </div>
      <!-- Spoogler's Facebook email -->
      <div class="form-group {% if spoogler_email_error %} has-error {% endif %}">
        <label class="control-label" for="spoogler_fb_email">If you (the Spoogler) have a Facebook account, what is the email you use for that account? </label>
        <input type="text" class="form-control" id="spoogler_fb_email" name="spoogler_fb_email" value="{{ spoogler_fb_email }}" />
      </div>
      <!-- Googler's ldap -->
      <div class="form-group {% if googler_ldap_error %} has-error {% endif %}">
       <label class="control-label" for="googler_ldap">*Googler's ldap: </label>
        <div class="input-group">
          <input type="text" class="form-control" id="googler_ldap" name="googler_ldap" value="{{ googler_ldap }}" aria-describedby="basic-addon2" />
          <span class="input-group-addon" id="basic-addon2">@google.com</span>
        </div>
      </div>
    </div>
    <!-- LANGUAGE AND WORK STATUS -->
    <div id="language_work">
      <!-- From what country did you relocate? -->
      <div class="form-group">
        <label class="control-label" for="spoogler_country">From what country did you relocate?</label>
        <input type="text" class="form-control" id="spoogler_country" name="spoogler_country" value="{{ spoogler_country }}" />
      </div>
      <!-- Spoogler's current work status: -->
      <div class="form-group">
        <label class="control-label" for="work_status">Spoogler's current work status:</label>
        <select class="form-control" id="work_status" name="work_status">
          {% for status in spoogler_work_status %}
          <option value="{{ status[0] }}">{{ status[1] }}</option>
          {% endfor %}
        </select>
      </div>
      <!-- Spoogler's English language proficiency -->
      <div class="form-group">
        <label class="control-label" for="engl_proficiency">Spoogler's English language proficiency: </label>
        <select class="form-control" id="engl_proficiency" name="engl_proficiency">
          {% for proficiency in  engl_proficiency %}
          <option value="{{ proficiency[0] }}">{{ proficiency[1] }}</option>
          {% endfor %}
        </select>
      </div>
      <!-- Other languages spoken by Spoogler -->
      <div class="form-group">
        <label class="control-label">What (if any) other languages do you (the Spoogler) speak and what is your proficiency?</label>
        {% for i in range(0,5) %}
          <div class="form-group">
            <input type="text" class="form-control" id="spoogler_lang{{ loop.index0 }}" name="spoogler_lang{{ loop.index0 }}" value="" />
            <select class="form-control" id="spoogler_lang_prof{{ loop.index0 }}" name="spoogler_lang_prof{{ loop.index0 }}">
              {% for proficiency in  engl_proficiency %}
                <option value="{{ proficiency[0] }}">{{ proficiency[1] }}</option>
              {% endfor %}
            </select>
          </div>
        {% endfor %}
      </div>
      <!-- Spoogler's native language -->
      <div class="form-group">
        <label class="control-label" for="native_lang">Spoogler's native language:</label>
        <input type="text" class="form-control" id="native_lang" name="native_lang" value="{{ native_lang }}" />
      </div>
    </div>
    <!-- DEMOGRAPHICS -->
    <div id="demographics">
      <!-- Where do you live in the Bay Area? -->
      <div class="form-group">
        <label class="control-label" for="address">Where do you live in the Bay Area?</label>
        {% for option in address %}
        <div class="radio">
          <label><input type="radio" id="address" name="address" value="{{ option[0] }}" {% if loop.index0 == 0 %} checked {% endif %}> {{ option[1] }}
            {% if loop.last %}
              <input type="text" class="form-control" id="other_address" name="other_address" value="{{ other_address }}"/>
            {% endif %}
          </label>
        </div>
        {% endfor %}
      </div>
      <!-- How long have you been in the Bay Area? -->
      <div class="form-group">
        <label class="control-label" for="time_in_area">How long have you been in the Bay Area?</label>
        <select class="form-control" id="time_in_area" name="time">
          {% for t in time %}
            <option value="{{ t[0] }}">{{ t[1] }}</option>
          {% endfor %}
        </select>
      </div>
      <!-- What have you found challenging about your relocation to the Bay Area? -->
      <div class="form-group">
        <label class="control-label" for="spoogler_relo">What have you found most challenging about your relocation to the Bay Area?</label>
        <input type="text" class="form-control" id="spoogler_relo" name="spoogler_relo" value="{{ spoogler_relo }}" />
      </div>
      <!-- Spoogler's main form of transportation -->
      <div class="form-group">
        <label class="control-label" for="transportation">Spoogler's main form of transportation to get around in the Bay Area: </label>
        {% for transport in transportation %}
        <div class="radio">
          <label><input type="radio" id="transportation" name="transportation" value="{{ transport[0] }}" {% if loop.index0 == 0%} checked {% endif %}> {{ transport[1] }}</label>
        </div>
        {% endfor %}
      </div>
      <!-- Side of the road Spoogler is accustomed to driving -->
      <div class="form-group">
        <label class="control-label" for="side_driving">On what side of the road are you (the Spoogler) accustomed to driving?: </label>
        {% for side in side_driving %}
        <div class="radio">
          <label><input type="radio" id="side_driving" name="side_driving" value="{{ side[0] }}" {% if loop.index0 == 0 %} checked {% endif %}> {{ side[1] }}</label>
        </div>
        {% endfor %}
      </div>
    </div>
    <!-- EVENTS -->
    <div id="events">
      <!-- What size of events would you be interested in attending? -->
      <div class="form-group">
        <label class="control-label" for="event_size">What size of events would you be interested in attending? Select all that apply.</label>
        {% for size in event_size %}
          <div class="checkbox">
            <label><input type="checkbox" id="event_size" name="event_size" value="{{ size[0] }}"> {{ size[1] }}</label>
          </div>
        {% endfor %}
      </div>
      <!-- What type of events would you be interested in attending? -->
      <div class="form-group">
        <label class="control-label" for="event_type">What type of events would you be interested in attending? Select all that apply.</label>
        {% for type in event_type %}
          <div class="checkbox">
            <label><input type="checkbox" id="event_type" name="event_type" value="{{ type[0] }}"> {{ type[1] }}
              {% if loop.last %}
                <input type = "text" class="form-control" id="event_type_other" name="event_type_other" value="{{ event_type_other }}"/>
              {% endif %}
            </label>
          </div>
        {% endfor %}
      </div>
    </div>
    <!-- CHILDREN AND SUPPORT SERVICES -->
    <div id="children_support">
      <!-- What type of support services would you find useful from this group? -->
      <div class="form-group">
        <label class="control-label" for="support_type">What type of support services would you find useful from this group? Select all that apply.</label>
        {% for support in support_type %}
         <div class="checkbox">
            <label><input type="checkbox" id="support_type" name="support_type" value="{{ support[0] }}"> {{ support[1] }}
              {% if loop.last %}
                <input type = "text" class="form-control" id="support_type_other" name="support_type_other" value="{{ support_type_other }}"/>
              {% endif %}
            </label>
         </div>
        {% endfor %}
      </div>
      <!-- What other forms of support do you have or will you access? -->
      <div class="form-group">
        <label class="control-label" for="support_other">What other forms of support do you have or will you access? Select all that apply.</label>
        {% for other in support_other %}
        <div class="checkbox">
            <label><input type="checkbox" id="support_other" name="support_other" value="{{ other[0] }}"> {{ other[1] }}
              {% if loop.last %}
                <input type = "text" class="form-control" id="other" name="other" value="{{ support_type_other2 }}"/>
              {% endif %}
            </label>
         </div>
        {% endfor %}
      </div>
      <!-- If you have any children, please select their age group: -->
      <div class="form-group">
        <label class="control-label" for="children_ages">If you have any children, please select their age group:</label>
        {% for age in children_ages %}
        <div class="checkbox">
        <label><input type="checkbox" id="children_ages" name="children_ages" value="{{ age[0] }}"> {{ age[1] }}</label>
        </div>
        {% endfor %}
      </div>
    </div>
      <div class="col-md-12 text-center">
        <input class="btn btn-lg btn-success" id="next" type="button" value="Next"/>
        <button type="submit" class="btn btn-lg btn-primary" id="submit">Submit</button>
      </div>
  </form>
  </div>
  
  <script>
    function showAlert() {
        alert("Thank you for filling out the membership form. A confirmation email has been sent to the @google.com email of the Googler.");  
    }
  </script>
  
</body>
</html>
